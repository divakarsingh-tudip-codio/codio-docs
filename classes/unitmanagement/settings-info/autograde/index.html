<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Codio team">
        <link rel="canonical" href="https://docs.codio.com/classes/unitmanagement/settings-info/autograde/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Autograde - Codio Documentation</title>
        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javscript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../..">Codio Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="https://www.codio.com">Codio</a>
                            </li>
                            <li >
                                <a href="../../../..">Home</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li>
                                <a href="https://github.com/codio/codio-docs"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#transferring-authored-content-assessment-total">Transferring authored content assessment total</a></li>
        <li class="main "><a href="#running-a-custom-script">Running a custom script</a></li>
        <li class="main "><a href="#secure-scripts">Secure scripts</a></li>
        <li class="main "><a href="#timeout">Timeout</a></li>
        <li class="main "><a href="#accessing-authored-content-assessment-results">Accessing authored content assessment results</a></li>
        <li class="main "><a href="#regrading-for-an-individual-student">Regrading for an individual student</a></li>
        <li class="main "><a href="#regrading-all-students">Regrading all students</a></li>
        <li class="main "><a href="#testing-and-debugging-your-grading-scripts">Testing and debugging your grading scripts</a></li>
            <li><a href="#testing-your-script-in-the-ide">Testing your script in the IDE</a></li>
        <li class="main "><a href="#example-python-grading-script">Example Python grading script</a></li>
        <li class="main "><a href="#example-bash-grading-script">Example Bash grading script</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>This option provides two ways of autograding unit scores for each student. The grading field is populated by a script authored by the project author without the need to manually populate it. The autograding script is triggered once a unit is marked as complete.</p>
<p>A Unit is marked as complete in any of the following ways</p>
<ol>
<li>Students mark the unit as complete from their dashboard.</li>
<li>The teacher can also mark the unit as complete for a student from the Classroom dashboard with the unit selected.</li>
<li>The teacher can mark all units as complete for all students by pressing the <strong>Actions</strong> button. This button appears on the unit screen.</li>
<li>If you are using the <strong>Unit Duration</strong> feature, all student units are marked as complete as soon as the unit duration expiry date and time is reached.</li>
</ol>
<p>The two autograding options can be found in the unit settings.</p>
<ol>
<li>Use the auto-graded assessments within the unit to auto-populate the grading field with the aggregate % score from all assessments.</li>
<li>Run a script to generate the grading either as soon as the student (or teacher) marks the unit as complete in their dashboard or when the <a href="/classes/unitmanagement/settings-info/unit-duration/">unit duration</a> expires.</li>
</ol>
<p>The two options can be found in the <strong>AUTOGRADE METHOD</strong> drop-down list.</p>
<p><a name="transfer"></a></p>
<h1 id="transferring-authored-content-assessment-total">Transferring authored content assessment total<a class="headerlink" href="#transferring-authored-content-assessment-total" title="Permanent link"></a></h1>
<p>If you have created auto-graded assessments within your authored content, Codio aggregates all scores so you can see them in the Classroom dashboard. You will see that there is a total percentage calculated. This percentage value is transferred into the grading field. If you are using <a href="/classes/lti">LMS integration</a> then this grading field is then transferred into your LMS gradebook once you <a href="/classes/monitor/grading">release the grades</a>.</p>
<p><a name="script"></a></p>
<h1 id="running-a-custom-script">Running a custom script<a class="headerlink" href="#running-a-custom-script" title="Permanent link"></a></h1>
<p>A more advanced way of populating the grading field is to write your own custom script that evaluates the student code. This script can then transfer the grading value into the grading field.</p>
<p>If you are using an LMS platform with Codio then be sure to write a percentage value into this field to maintain compatibility with LMS gradebooks.</p>
<p><img alt="authtoken" src="/img/grading-secure.png" /></p>
<p><a name="securescripts"></a></p>
<h1 id="secure-scripts">Secure scripts<a class="headerlink" href="#secure-scripts" title="Permanent link"></a></h1>
<p>If you want your scripts to run securely such that the student has no way of either viewing the script or viewing other files that might contain secure data then you should place those scripts and files in the <code>.guides/secure</code> folder. Codio ensures that only the original project author is able to access this folder but when it is assigned to Students as a Unit, it is not accessible in any way and the script runs in an ephemeral container isolated from the students unit.</p>
<h1 id="timeout">Timeout<a class="headerlink" href="#timeout" title="Permanent link"></a></h1>
<p>Your script must execute within 3 minutes or a timeout error will occur.</p>
<h1 id="accessing-authored-content-assessment-results">Accessing authored content assessment results<a class="headerlink" href="#accessing-authored-content-assessment-results" title="Permanent link"></a></h1>
<p>You are able to get scores attained by students in authored content based autograded assessments. This data is in JSON format and can be accessed from the <code>CODIO_AUTOGRADE_ENV</code> environment variable. Below is an example.</p>
<pre><code>{
  &quot;assessments&quot;: {
    &quot;stats&quot;: {
      &quot;total&quot;: 2,
      &quot;answered&quot;: 2,
      &quot;correct&quot;: 2,
      &quot;totalPoints&quot;: 12,
      &quot;points&quot;: 8
    },
    &quot;info&quot;: [{
      &quot;name&quot;: &quot;Test 1&quot;,
      &quot;points&quot;: 5,
      &quot;answer&quot;: {
        &quot;correct&quot;: true,
        &quot;points&quot;: 5
      }
    }, {
      &quot;name&quot;: &quot;Test 2&quot;,
      &quot;points&quot;: 7,
      &quot;answer&quot;: {
        &quot;correct&quot;: true,
        &quot;points&quot;: 3
      }
    }]
  },
  &quot;completedDate&quot;: &quot;2017-02-07T09:47:54.471Z&quot;
}
</code></pre>

<p>You can get both summary data and data for each assessment individually.</p>
<p><a name="regrading"></a></p>
<h1 id="regrading-for-an-individual-student">Regrading for an individual student<a class="headerlink" href="#regrading-for-an-individual-student" title="Permanent link"></a></h1>
<p>If students set their work to 'complete' such that an autograde step is triggered then you can regrade the work by resetting the complete switch and then setting it again, which re-triggers the autograding.</p>
<h1 id="regrading-all-students">Regrading all students<a class="headerlink" href="#regrading-all-students" title="Permanent link"></a></h1>
<p>From the <strong>Actions</strong> area of the Unit, you can regrade all students that have already been auto-graded by pressing the <strong>Regrade All</strong> button. This is useful if you have found a bug in your grading script. If you follow (or use) the code sample shown at the bottom of this page you can see how the original student submission date is handled.</p>
<h1 id="testing-and-debugging-your-grading-scripts">Testing and debugging your grading scripts<a class="headerlink" href="#testing-and-debugging-your-grading-scripts" title="Permanent link"></a></h1>
<p><strong>IMPORTANT</strong>: please read this section carefully.</p>
<p>We provide a way of testing autograding scripts when authoring your project. This is described below. You should make use of this before publishing your project to a class.</p>
<p>You should be aware that once the Unit has been published to the class, any changes made to the Unit's source project are not automatically reflected in the published Unit. As a result, if you include your main grading logic within the project itself and if that script has bugs, you will not be able to fix the bugs without deleting the Unit, fixing the bug and finally republishing the Unit. All student data will be lost as a result. However, if all your scripts are stored in <code>.guides/secure</code> folder, you can update and test them and you can then <a href="/classes/unitmanagement/settings-info/updateunit/">Update Unit</a></p>
<p>Another strategy is to use a simple bootstrap launcher that loads and executes the script from a remote location that you can edit and debug independently of the Codio box.</p>
<p>The following example bash script shows a Python script that is located as a Gist on GitHub. This script might be called <code>.guides/secure/launcher.sh</code>.</p>
<pre><code>#!/bin/bash
URL=&quot;https://gist.githubusercontent.com/MaximKraev/11cd4e43b0c43f79d9478efbe21ba1b9/raw/validate.py&quot;
curl -fsSL $URL | python - $@
</code></pre>

<p>It is important that it is located in the <code>.guides/secure</code> folder. You then specify the full filepath <code>.guides/secure/launcher.sh</code> in the <strong>Set custom script path</strong> field in the Unit settings.</p>
<p>You are now free to debug the Python script and fix any bugs that you may have noticed once students have started work on the Unit.</p>
<h2 id="testing-your-script-in-the-ide">Testing your script in the IDE<a class="headerlink" href="#testing-your-script-in-the-ide" title="Permanent link"></a></h2>
<p>We provide the ability to test your autograding script from the <strong>Education -&gt; Test Autograde Script</strong> menu.</p>
<p>This option lets you specify the location to your autograding script and run it against the current project contents. It also lets you simulate scores attained by any autograded assessments located within the Codio Guide.</p>
<p><img alt="authtoken" src="/img/autograde-test.png" /></p>
<p>You should be aware of the following points.</p>
<ul>
<li>When you press the <strong>Test Script</strong> button</li>
<li>all output to <code>stdout</code> and <code>stderr</code> are displayed within the dialog</li>
<li>the grade as returned by your test script is at the bottom of the output section</li>
<li><code>stdout</code> and <code>stderr</code> output is not available when running for real (not in this test mode) as the autograding script runs invisibly when the Unit is marked as complete. As such, you should generate output for testing and debugging purposes only.</li>
<li>If you want your script to provide any feedback to the student, then you should output it to a file that the student can access when opening the project at a later date. In this case you will need to allow read-only access to the project from the Unit settings after being marked as complete.</li>
<li>Your script must execute within 3 minutes to avoid a timeout error.</li>
</ul>
<p>If the Guide has autograded assessments then the test takes its data from the fields shown in the dialog. All of your assessment settings are accessed as described above under <strong>Accessing Guide assessment results</strong>.</p>
<h1 id="example-python-grading-script">Example Python grading script<a class="headerlink" href="#example-python-grading-script" title="Permanent link"></a></h1>
<p>Below is an example Python file that might be loaded by the bootstrap script above.</p>
<p>Notice that the only code you need to modify is near the bottom. The other functions are helpers and can be used for any test in any Unit.</p>
<pre><code class="python">import os
import random
import requests
import json
import datetime

# import grade submit function
import sys
sys.path.append('/usr/share/codio/assessments')
from lib.grade import send_grade

##################
# Helper functions #
##################


# Get the url to send the results to
CODIO_AUTOGRADE_URL = os.environ[&quot;CODIO_AUTOGRADE_URL&quot;]
CODIO_UNIT_DATA = os.environ[&quot;CODIO_AUTOGRADE_ENV&quot;]

def main():
  # Execute the test on the student's code
  grade = validate_code()
  # Send the grade back to Codio with the penatly factor applied
  res = send_grade(int(round(grade)))
  exit( 0 if res else 1)

########################################
# You only need to modify the code below #
########################################

# Your actual test logic
# Our demo function is just generating some random score
def validate_code():
  return random.randint(10, 100)

main()
</code></pre>

<p><a name="examplebashscript"></a></p>
<h1 id="example-bash-grading-script">Example Bash grading script<a class="headerlink" href="#example-bash-grading-script" title="Permanent link"></a></h1>
<p>Below is an example bash script file that would be stored  in .guides/secure folder</p>
<pre><code>#!/bin/bash
set -e
# Your actual test logic
# Our demo function is just generating some random score
POINTS=$(( ( RANDOM % 100 )  + 1 ))
# Show json based passed environment
echo $CODIO_AUTOGRADE_ENV
# Send the grade back to Codio
curl --retry 3 -s &quot;$CODIO_AUTOGRADE_URL&amp;grade=$POINTS&quot;
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2019 Codio Inc.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
